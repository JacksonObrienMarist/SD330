<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Refrigerator Display</title>
    <link rel="stylesheet" href="fridgeResources/fridge.css">
</head>

<body onload="doStartClock()">

    <header>
        <h1>Fridge Display</h1>
        <hr>
    </header>

    <div class="fridge-display">
        <div id="clock" class="clock">00:00:00 AM</div>
        <div id="temperature" class="temperature"></div>
        <div class="image-display">
            <img id="image">
        </div>
        <div class="button-panel">
            <button class="on-off" id="powerButton" onclick="togglePower()">OFF</button>
            <button onclick="showTemperature()">Temperature</button>
            <button onclick="showImage('fridge')">Fridge View</button>
            <button onclick="showImage('web')">Browser</button>
            <button onclick="showImage('netflix')">Netflix</button>
        </div>
    </div>

    <script>
        let isOn = false;
        let temperatureSet = false;

        function doStartClock() {
            setInterval(doClockTick, 1000); 
        }

        function doClockTick() {
            const currentDate = new Date();
            let hours = currentDate.getHours();
            const mins = currentDate.getMinutes();
            const secs = currentDate.getSeconds();
            let period = "AM";

            if (hours >= 12) {
                period = "PM";
                if (hours > 12) {
                    hours -= 12;
                }
            } else if (hours === 0) {
                hours = 12;
            }

            var timeString = hours + ":" + (mins < 10 ? '0' + mins : mins) + ":" + (secs < 10 ? '0' + secs : secs) + " " + period;
            const clockElement = document.getElementById("clock");
            clockElement.textContent = timeString;
        }

        function togglePower() {
            isOn = !isOn;
            const powerButton = document.getElementById('powerButton');
            const temperature = document.getElementById('temperature');
            const image = document.getElementById('image');

            if (isOn) {
                powerButton.style.backgroundColor = 'green';
                powerButton.textContent = 'ON';
                image.style.display = 'none';
                if (temperatureSet) {
                    temperature.textContent = '29°F';
                }
            } else {
                powerButton.style.backgroundColor = 'grey';
                powerButton.textContent = 'OFF';
                temperature.textContent = '';
                image.style.display = 'none';
                temperatureSet = false;
            }
        }

        function showTemperature() {
            if (!isOn) return;
            const temperature = document.getElementById('temperature');
            temperature.textContent = '29°F';
            temperatureSet = true;
        }

        function showImage(type) {
            if (!isOn) return;
            const image = document.getElementById('image');

            image.style.display = 'block';

            if (type === 'netflix') {
                image.src = 'https://aptokash.github.io/SD330-2/06-tv.jpg';
                image.classList.remove("fridge");
            } else if (type === 'fridge') {
                image.src = 'https://aptokash.github.io/SD330-2/06-fridge.jpg';
                image.classList.add("fridge");
            } else if (type === 'web') {
                image.src = 'https://aptokash.github.io/SD330-2/06-web.jpg';
                image.classList.remove("fridge");
            }
        }
    </script>
</body>
    <footer>
        <hr>
        <p><small>&#169;Jackson O'Brien - 10/16/2024</small></p>    
    </footer>
</html>